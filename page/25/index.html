<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"dawnzzz.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="个人博客站点">
<meta property="og:type" content="website">
<meta property="og:title" content="Dawn&#39;s Blogs">
<meta property="og:url" content="http://dawnzzz.github.io/page/25/index.html">
<meta property="og:site_name" content="Dawn&#39;s Blogs">
<meta property="og:description" content="个人博客站点">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="DawnZH">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://dawnzzz.github.io/page/25/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Dawn's Blogs</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Dawn's Blogs</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">分享技术 记录成长</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://dawnzzz.github.io/2022/09/06/Python%E6%9D%82%E8%B0%88-2-%E6%B5%B7%E8%B1%A1%E8%BF%90%E7%AE%97%E7%AC%A6%E5%92%8C%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DawnZH">
      <meta itemprop="description" content="个人博客站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dawn's Blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/09/06/Python%E6%9D%82%E8%B0%88-2-%E6%B5%B7%E8%B1%A1%E8%BF%90%E7%AE%97%E7%AC%A6%E5%92%8C%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E/" class="post-title-link" itemprop="url">Python杂谈 (2) 海象运算符和类型声明</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-09-06 18:03:12" itemprop="dateCreated datePublished" datetime="2022-09-06T18:03:12+08:00">2022-09-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-15 10:35:06" itemprop="dateModified" datetime="2023-12-15T10:35:06+08:00">2023-12-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python%E6%9D%82%E8%B0%88/" itemprop="url" rel="index"><span itemprop="name">Python杂谈</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="海象运算符"><a href="#海象运算符" class="headerlink" title="海象运算符"></a>海象运算符</h1><p>从 Python 3.8 开始，加入了海象运算符 <code>:=</code>，语法格式是 <code>variable_name := expression</code>。</p>
<h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><blockquote>
<p>用于 if-else 条件表达式中</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> a := <span class="number">5</span> &gt; <span class="number">1</span>:</span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;do sth&quot;</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>用于 while 循环</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 常规写法</span></span><br><span class="line">n = <span class="number">3</span></span><br><span class="line"><span class="keyword">while</span> n:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;do sth!&#x27;</span>)</span><br><span class="line">    n -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 升级写法</span></span><br><span class="line">n = <span class="number">3</span></span><br><span class="line"><span class="keyword">while</span> (n := n - <span class="number">1</span>) + <span class="number">1</span>: </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;do sth!&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>加 1 是因为在循环条件判断之前，n 已经减 1 了。</p>
<blockquote>
<p>读取文件</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fp = <span class="built_in">open</span>(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line"><span class="keyword">while</span> line := fp.readline():</span><br><span class="line">    <span class="built_in">print</span>(line)</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/09/06/Python%E6%9D%82%E8%B0%88-2-%E6%B5%B7%E8%B1%A1%E8%BF%90%E7%AE%97%E7%AC%A6%E5%92%8C%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://dawnzzz.github.io/2022/09/06/Python%E6%9D%82%E8%B0%88-1-%E8%A3%85%E9%A5%B0%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DawnZH">
      <meta itemprop="description" content="个人博客站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dawn's Blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/09/06/Python%E6%9D%82%E8%B0%88-1-%E8%A3%85%E9%A5%B0%E5%99%A8/" class="post-title-link" itemprop="url">Python杂谈 (1) 装饰器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-09-06 16:54:08" itemprop="dateCreated datePublished" datetime="2022-09-06T16:54:08+08:00">2022-09-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-15 10:35:06" itemprop="dateModified" datetime="2023-12-15T10:35:06+08:00">2023-12-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python%E6%9D%82%E8%B0%88/" itemprop="url" rel="index"><span itemprop="name">Python杂谈</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h1><p>装饰器（Decorators），是 Python 中修改其他函数的功能的函数，有助于让我们的代码更简短。</p>
<p>比如可以用一个简易的装饰器，定义一个函数<strong>执行之前或者执行之后做的额外工作</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这是一个装饰器</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a_new_decorator</span>(<span class="params">a_func</span>):</span></span><br><span class="line">	    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapTheFunction</span>():</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I am doing some boring work before executing a_func()&quot;</span>)</span><br><span class="line"> </span><br><span class="line">        a_func()</span><br><span class="line"> </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I am doing some boring work after executing a_func()&quot;</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> wrapTheFunction</span><br></pre></td></tr></table></figure>

<p>当一个函数需要这个装饰器时，可以这样调用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a_function_requiring_decoration</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I am the function which needs some decoration to remove my foul smell&quot;</span>)</span><br><span class="line"></span><br><span class="line">a_function_requiring_decoration = a_new_decorator(a_function_requiring_decoration)</span><br><span class="line"><span class="comment">#now a_function_requiring_decoration is wrapped by wrapTheFunction()</span></span><br><span class="line"> </span><br><span class="line">a_function_requiring_decoration()</span><br><span class="line"><span class="comment">#outputs:I am doing some boring work before executing a_func()</span></span><br><span class="line"><span class="comment">#        I am the function which needs some decoration to remove my foul smell</span></span><br><span class="line"><span class="comment">#        I am doing some boring work after executing a_func()</span></span><br></pre></td></tr></table></figure>

<h1 id="符号"><a href="#符号" class="headerlink" title="@ 符号"></a>@ 符号</h1><p>以上就是一个手动实现的装饰器，可以用 <code>@</code> 符号来更简单的实现。事实上，<code>@a_new_decorator</code> 就是以下语句的<strong>简易声明</strong>：</p>
<p><code>a_function_requiring_decoration = a_new_decorator(a_function_requiring_decoration)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@a_new_decorator</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a_function_requiring_decoration</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I am the function which needs some decoration to remove my foul smell&quot;</span>)</span><br><span class="line"></span><br><span class="line">a_function_requiring_decoration()</span><br><span class="line"><span class="comment">#outputs: I am doing some boring work before executing a_func()</span></span><br><span class="line"><span class="comment">#         I am the function which needs some decoration to remove my foul smell</span></span><br><span class="line"><span class="comment">#         I am doing some boring work after executing a_func()</span></span><br></pre></td></tr></table></figure>

<p>但是，运行如下代码会存在一个<strong>问题</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a_function_requiring_decoration.__name__)</span><br><span class="line"><span class="comment"># Output: wrapTheFunction</span></span><br></pre></td></tr></table></figure>

<p>因为函数 <code>a_function_requiring_decoration</code> 被重写了，所以这个函数被 <code>warpTheFunction</code> 替代了，这里就需要 <code>functools.wraps</code>。</p>
<h2 id="functools-wraps"><a href="#functools-wraps" class="headerlink" title="functools.wraps"></a>functools.wraps</h2><p>修改修饰器的声明方式即可解决上述问题：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a_new_decorator</span>(<span class="params">a_func</span>):</span></span><br><span class="line"><span class="meta">    @wraps(<span class="params">a_func</span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapTheFunction</span>():</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I am doing some boring work before executing a_func()&quot;</span>)</span><br><span class="line">        a_func()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I am doing some boring work after executing a_func()&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> wrapTheFunction</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/09/06/Python%E6%9D%82%E8%B0%88-1-%E8%A3%85%E9%A5%B0%E5%99%A8/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://dawnzzz.github.io/2022/07/07/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CNN%E4%B8%8ERNN/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DawnZH">
      <meta itemprop="description" content="个人博客站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dawn's Blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/07/07/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CNN%E4%B8%8ERNN/" class="post-title-link" itemprop="url">NLP学习笔记 (7) CNN与RNN</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-07-07 09:26:30" itemprop="dateCreated datePublished" datetime="2022-07-07T09:26:30+08:00">2022-07-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-15 10:35:06" itemprop="dateModified" datetime="2023-12-15T10:35:06+08:00">2023-12-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">NLP学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="CNN"><a href="#CNN" class="headerlink" title="CNN"></a>CNN</h1><p>对于图片而言，通常使用 CNN（卷积神经网络）。</p>
<h2 id="简化全连接神经网络"><a href="#简化全连接神经网络" class="headerlink" title="简化全连接神经网络"></a>简化全连接神经网络</h2><p>若使用全连接神经网络，则参数很多，容易过拟合。</p>
<p>对于图片检测而言，也行不需要看整张图片，只需要<strong>看到图片的一部分（所以提出 Receptive Field）</strong>，就可以检测 pattern。CNN 的简化方式就是<strong>一个 Receptive Field 对应于一个神经网络单元</strong>。典型的 Receptive Field 设置如下：</p>
<ul>
<li>一个 Receptive Field 包含了图片的所有 channel（深度），长度 × 宽度被称为 kernel size。</li>
<li>Receptive Field 移动的距离称为<strong>步长（stride）</strong>。</li>
<li>若 Receptive Field 超出了图片的范围，需要<strong>填充（padding）</strong>。</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CNN%E4%B8%8ERNN/1657158365832.png" alt="1657158365832"></p>
<h2 id="共享参数"><a href="#共享参数" class="headerlink" title="共享参数"></a>共享参数</h2><p>对于图像识别而言，同一个 pattern 的位置可能不同，Receptive Field 用于检测 pattern。</p>
<p>所以对于不同位置的 Receptive Field，可以<strong>共享参数</strong>（因为尽管这些 Receptive Field 在不同位置，但是它们在<strong>检测同一个 pattern</strong>）。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CNN%E4%B8%8ERNN/1657158755492.png" alt="1657158755492"></p>
<h2 id="Convolutional-Layer"><a href="#Convolutional-Layer" class="headerlink" title="Convolutional Layer"></a>Convolutional Layer</h2><p>Respective Field + 参数共享 = Convolutional Layer（卷积层）。</p>
<p>卷积层中含有很多 filter（<strong>一个 filter 相当于一个 Respective Field，filter 中的参数相当于 Respective Field 送入神经网络单元的权重/参数</strong>）。</p>
<p>卷积层产生的输出称之为 <strong>Feature Map</strong>，这可以看作是一个新的图片，图片的 channel 等于 filter 的个数。</p>
<h2 id="池化"><a href="#池化" class="headerlink" title="池化"></a>池化</h2><p><strong>池化（Pooling）相当于缩小图片</strong>，在人类看来缩小图片，不会影响到 pattern 的检测。</p>
<p>如，Max Pooling：将图片分成多块，提取出每个块中最大的值。</p>
<h2 id="组合起来"><a href="#组合起来" class="headerlink" title="组合起来"></a>组合起来</h2><p>在卷积和池化之后，将得到的结果（相比于原始图片小了很多）送入全连接神经网络，就得到了完整的 CNN 网络。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CNN%E4%B8%8ERNN/1657160205164.png" alt="1657160205164"></p>
<h1 id="RNN"><a href="#RNN" class="headerlink" title="RNN"></a>RNN</h1><h2 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h2><p>RNN 中，会将<strong>上一次输入的产生的东西保存下来</strong>，作为本次的一个输入。</p>
<p>分为 Elman Network 和 Jordan Network：</p>
<ul>
<li><strong>Elman Network</strong>：保存的是 hiden layer 的值。</li>
<li><strong>Jordan Network</strong>：保存的是 output 的值。</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CNN%E4%B8%8ERNN/1657161992754.png" alt="1657161992754"></p>
<h2 id="双向-RNN"><a href="#双向-RNN" class="headerlink" title="双向 RNN"></a>双向 RNN</h2><p>RNN 可以是<strong>双向</strong>的，训练一个正向 RNN 和一个逆向 RNN，将正向和逆向的输出合并起来进行输出。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CNN%E4%B8%8ERNN/1657162262353.png" alt="1657162262353"></p>
<h2 id="LSTM"><a href="#LSTM" class="headerlink" title="LSTM"></a>LSTM</h2><p>LSTM（Long Short-term Memory）</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CNN%E4%B8%8ERNN/1657162786833.png" alt="1657162786833"></p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CNN%E4%B8%8ERNN/1657163055876.png" alt="1657163055876"></p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CNN%E4%B8%8ERNN/1657164185170.png" alt="1657164185170"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://dawnzzz.github.io/2022/06/22/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-Parsing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DawnZH">
      <meta itemprop="description" content="个人博客站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dawn's Blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/06/22/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-Parsing/" class="post-title-link" itemprop="url">NLP学习笔记 (6) Parsing</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-22 17:35:05" itemprop="dateCreated datePublished" datetime="2022-06-22T17:35:05+08:00">2022-06-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-15 10:35:06" itemprop="dateModified" datetime="2023-12-15T10:35:06+08:00">2023-12-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">NLP学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Constituency-Parsing"><a href="#Constituency-Parsing" class="headerlink" title="Constituency Parsing"></a>Constituency Parsing</h1><p><strong>Constituency Parsing 就是：</strong></p>
<ul>
<li><p>找出一段 text span 作为 <strong>constituents</strong></p>
</li>
<li><p>每一个 constituents 都有一个<strong>标签</strong></p>
</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-Parsing/1655892270551.png" alt="1655892270551"></p>
<ul>
<li>对于<strong>每一个单词</strong>都是一个 constituent（标签为这个单词的词性）</li>
<li><strong>相邻的 constituent</strong> 可以组成一个<strong>更大</strong>的 constituent</li>
<li>一句话的所有单词，从底向上，可以组成一棵树</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-Parsing/1655892544642.png" alt="1655892544642"></p>
<h2 id="Chart-based"><a href="#Chart-based" class="headerlink" title="Chart-based"></a>Chart-based</h2><p>Chart-based 方法实际上就是<strong>对每一个 span 进行两次分类</strong>：</p>
<ul>
<li>放入<strong>二分类</strong>：判断<strong>是否是</strong> constituent</li>
<li>放入<strong>多分类</strong>：constituent 属于哪一个<strong>标签</strong></li>
</ul>
<p>下图是 Chart-based 的结构，其中 <strong>Span Feature Extraction 与 Coreference Resolution 中的一样</strong>。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-Parsing/1655893866459.png" alt="1655893866459"></p>
<hr>
<p>需要注意的是，对于 span 的选择可能会产生<strong>矛盾</strong>，比如两个<strong>重合</strong>的 span 都被判断出是 constituent，那么就无法组成一棵树。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-Parsing/1655894066479.png" alt="1655894066479"></p>
<p><strong>解决方法就是</strong>，<strong>穷举出所有可能性的树</strong>，然后对每一棵树进行评分，选取评分最高的树。</p>
<h2 id="Transition-based"><a href="#Transition-based" class="headerlink" title="Transition-based"></a>Transition-based</h2><p>Transition-based 中由三个部分组成：</p>
<ul>
<li><strong>Stack</strong>：初始为空。</li>
<li><strong>Buffer</strong>：初始存放整个句子。</li>
<li><strong>Actions</strong>：包括三种操作<ul>
<li>NT (X)：创建一个带有 X 标签的 constituent</li>
<li>SHIFT：将一个 token 从 Buffer 移动到 Stack 中</li>
<li>REDUCE：结束一个 constituent</li>
</ul>
</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-Parsing/1655894315635.png" alt="1655894315635"></p>
<p>实际上，我们需要训练一个<strong>分类模型</strong>，用于输出 Actions。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-Parsing/1655894356049.png" alt="1655894356049"></p>
<h2 id="Tree-to-Sequence"><a href="#Tree-to-Sequence" class="headerlink" title="Tree to Sequence"></a>Tree to Sequence</h2><p>甚至，我们可以利用 <strong>Seq2seq Model</strong>，将语法树变为一个 Sequence，比如：</p>
<p>对树进行<strong>遍历</strong>，得到遍历序列，这个遍历序列就是 Sequence。需要注意的是，这个模型不需要输出单词（因为可能会改变输入的句子），可以用 XX 表示输入的一个单词。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-Parsing/1655894496403.png" alt="1655894496403"></p>
<h1 id="Dependency-Parsing"><a href="#Dependency-Parsing" class="headerlink" title="Dependency Parsing"></a>Dependency Parsing</h1><p>Constituency Parsing 考虑的是一个句子中，相邻单词的关系。</p>
<p><strong>Dependency Parsing</strong> 考虑的是任意<strong>两个单词（不需要相邻）</strong>的关系，用箭头表示这种关系（标签为关系的类别），起始为 head，结束为 dependent。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-Parsing/1655894898468.png" alt="1655894898468"></p>
<p>Dependency Parsing就是将一句话变为有向图（Directed Graph，实际上也是一棵树），word 变为 node，关系变为 edge。</p>
<ul>
<li>所有 word 只有一个入边（除去 ROOT）。</li>
<li>从每一个 word 到 ROOT 有唯一的一条路径。</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-Parsing/1656986928287.png" alt="1656986928287"></p>
<p>核心方法就是：两个<strong>分类器</strong>，输入是两个 word。</p>
<ul>
<li>判断左边是否指向右边。</li>
<li>判断属于哪一种关系。</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-Parsing/1656987793280.png" alt="1656987793280"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://dawnzzz.github.io/2022/06/20/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DawnZH">
      <meta itemprop="description" content="个人博客站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dawn's Blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/06/20/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/" class="post-title-link" itemprop="url">NLP学习笔记 (5) 自注意力机制和Transformer</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-20 17:52:30" itemprop="dateCreated datePublished" datetime="2022-06-20T17:52:30+08:00">2022-06-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-15 10:35:06" itemprop="dateModified" datetime="2023-12-15T10:35:06+08:00">2023-12-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">NLP学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Self-Attention-机制"><a href="#Self-Attention-机制" class="headerlink" title="Self-Attention 机制"></a>Self-Attention 机制</h1><p>将各个向量放入 <strong>Self-Attention</strong>（可以使用多次） 中，得到与<strong>整个句子都相关</strong>的另外的向量。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655719447203.png" alt="1655719447203"></p>
<h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><p>Self-Attention 层，输入一些向量，输出另一些向量。每一个输出的向量与输入的向量都有关系。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655719567664.png" alt="1655719567664"></p>
<p>对于如何输出一个向量，实际上是看其他向量是否对应的输入<strong>有关系（relevant）</strong>。这里的有关系的程度用 <strong>α</strong> 表示：</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655719768962.png" alt="1655719768962"></p>
<p>对于<strong>如何计算 α</strong>，有两种方式：</p>
<ul>
<li><strong>Dot-product</strong>：输入向量乘以一个矩阵 W，之后再做点乘，点乘结果为 α。（transformer使用） </li>
<li><strong>Additive</strong>：输入向量乘以一个矩阵 W，相加之后进入 tanh，最后经过线性变换得到 α。</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655719747182.png" alt="1655719747182"></p>
<h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><ul>
<li><strong>得到相关性分数 α</strong>：首先输入乘以矩阵得到向量 q 和 k，将 q 和 k 点乘（<strong>dot-product</strong>）后进入 <strong>soft-max（作用是 normalization，也可以用其他的）</strong> 层：</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655721797344.png" alt="1655721797344"></p>
<ul>
<li><strong>根据 α 提取信息</strong>：将输入与矩阵相乘得到<strong>向量 v</strong>，再与 soft-max 的输出相乘并相加得到 Self-Attention 的输出 b。<strong>相关性大，则 α 大，所以输出中对应 v 的占比越高</strong>。</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655721841471.png" alt="1655721841471"></p>
<h2 id="Multi-head-Self-Attention"><a href="#Multi-head-Self-Attention" class="headerlink" title="Multi-head Self-Attention"></a>Multi-head Self-Attention</h2><p>这是 Self-Attention 的变形，用于计算不同种类的相关性。</p>
<p>最大的不同就是 q、k、v 三种向量<strong>乘以多个矩阵</strong>（矩阵的个数就是 head 的数量，即种数）得到<strong>不同的种类</strong>，每一种单独 Attention 得到每一种对应的输出。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655722732610.png" alt="1655722732610"></p>
<p>最后将每一种输出乘以一个矩阵，得到最终的输出。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655722841770.png" alt="1655722841770"></p>
<h2 id="加上位置信息-Positional-Encoding"><a href="#加上位置信息-Positional-Encoding" class="headerlink" title="加上位置信息 - Positional Encoding"></a>加上位置信息 - Positional Encoding</h2><p>上述的 Self-Attention 中，是没有位置信息的。若需要<strong>位置信息</strong>，则需要 <strong>Positional Encoding</strong>。具有工作如下：</p>
<ul>
<li>每一个位置 i，都有一个唯一的位置向量 ei</li>
<li>输入加上位置向量之后再 Attention 即可</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655723108847.png" alt="1655723108847"></p>
<h1 id="Transformer"><a href="#Transformer" class="headerlink" title="Transformer"></a>Transformer</h1><p>Transformer 是一种 <strong>Seq2seq Model</strong>（输入一个 sequence，输出一个 sequence）。</p>
<h2 id="Seq2seq-结构"><a href="#Seq2seq-结构" class="headerlink" title="Seq2seq 结构"></a>Seq2seq 结构</h2><p>Seq2seq Model 的结构包括一个 <strong>Encoder</strong> 和一个  <strong>Decoder</strong>。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655809629816.png" alt="1655809629816"></p>
<h3 id="Encoder"><a href="#Encoder" class="headerlink" title="Encoder"></a>Encoder</h3><p>Encoder 输入一排向量，输出另外一排向量。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655809876570.png" alt="1655809876570"></p>
<p>其中 Encoder 是 N 个 block 的重复，每一个 block 的结构如下：</p>
<ul>
<li>Self-Attention</li>
<li>Residual + Norm</li>
<li>全连接层（上图中 Feed Forward）</li>
<li>Residual + Norm</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655809982256.png" alt="1655809982256"></p>
<h3 id="Decoder"><a href="#Decoder" class="headerlink" title="Decoder"></a>Decoder</h3><h4 id="Autoregressive（AT）"><a href="#Autoregressive（AT）" class="headerlink" title="Autoregressive（AT）"></a>Autoregressive（AT）</h4><p>Autoregressive 就是在输出时，从左到右依次输出。其最显著的特点就是，<strong>每一个 Decoder 的输出作为下一次 Decoder 的输入</strong>。</p>
<p>Decoder 和 Encoder 的结构比较类似，区别在于：</p>
<ul>
<li>第一个 Attention 变为了 <strong>Masked</strong> Multi-Head Attention（Encoder中为 Multi-Head Attention）：Mask 的含义就是每一次 Attention，<strong>只看前面的向量，不看后面的向量</strong>。</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655811020124.png" alt="1655811020124"></p>
<ul>
<li><strong>增加</strong>了一层 Multi-Head Attention 和 Add &amp; Norm</li>
<li>最后一个 block 的输出进入<strong>线性层</strong>和 <strong>soft-max 层</strong>，输出的是最大可能性对应的结果（将这个输出放入下一次 Decoder 的输入）。</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655810751137.png" alt="1655810751137"></p>
<h4 id="Non-autoregressive（NAT）"><a href="#Non-autoregressive（NAT）" class="headerlink" title="Non-autoregressive（NAT）"></a>Non-autoregressive（NAT）</h4><p><strong>AT 和 NAT 的比较</strong>：</p>
<ul>
<li>AT 将 Decoder 的输出作为下一次 Decoder 的输入；NAT 输入的只有 BEGIN token，输入不会进入 Decoder 的输入。</li>
<li>如何得到 NAT 的输出长度？（Seq2seq 输出长度是不确定的）<ul>
<li>训练一个 Model 进行输出长度的预测。</li>
<li>输出一个很长的 sequence，忽略 END token 之后的东西。</li>
</ul>
</li>
<li>NAT 的优点：<ul>
<li>可以并行化计算，因为不用等待上一个 Decoder 的输出。</li>
<li>可以控制输出长度。</li>
</ul>
</li>
<li>NAT 通常比 AT 表现更差。</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655811450753.png" alt="1655811450753"></p>
<h3 id="Encoder-Decoder-之间的连接部分"><a href="#Encoder-Decoder-之间的连接部分" class="headerlink" title="Encoder-Decoder 之间的连接部分"></a>Encoder-Decoder 之间的连接部分</h3><p>实际上，Decoder 中多出的一层 Multi-Head Attention 和 Add &amp; Norm，就是用于连接 Encoder 和 Decoder。</p>
<p>这一部分被称为 <strong>Cross Attention</strong>。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655811789284.png" alt="1655811789284"></p>
<p>Cross Attention 的详细结构如下，计算 <strong>Decoder 中 Masked Multi-Head Attention 的输出</strong>向量与 <strong>Encoder 的输出</strong>之间的相关性（Attention）。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655811904635.png" alt="1655811904635"></p>
<h3 id="如何训练"><a href="#如何训练" class="headerlink" title="如何训练"></a>如何训练</h3><p>训练时，采用<strong>强制学习（Teacher Forcing）</strong>：每一次向 Decoder 的输入并不是上一次 Decoder 的输出，而是正确的结果。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6%E5%92%8CTransformer/1655812460812.png" alt="1655812460812"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://dawnzzz.github.io/2022/06/15/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-Coreference-Resolution/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DawnZH">
      <meta itemprop="description" content="个人博客站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dawn's Blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/06/15/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-Coreference-Resolution/" class="post-title-link" itemprop="url">NLP学习笔记 (4) Coreference Resolution</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-15 17:40:47" itemprop="dateCreated datePublished" datetime="2022-06-15T17:40:47+08:00">2022-06-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-15 10:35:06" itemprop="dateModified" datetime="2023-12-15T10:35:06+08:00">2023-12-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">NLP学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Coreference-Resolution"><a href="#Coreference-Resolution" class="headerlink" title="Coreference Resolution"></a>Coreference Resolution</h1><p><strong>Coreference Resolution</strong>，即代指消解，识别出代指的相同的东西。</p>
<p>需要识别出代指的一段文字（如他、它的 XX 等），称为 <strong>mention</strong>。代指消解的结果就是将同一个代指的 mention，放入同一个 <strong>cluster</strong> 中。</p>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><ul>
<li><strong>识别出 mention</strong>：需要一个二分类器，输入一个 span，判别是否是一个 mention。若有 N 个 token 的句子，需要运行 <code>N(N-1)/2</code> 次。</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-Coreference-Resolution/1655291452800.png" alt="1655291452800"></p>
<ul>
<li><strong>识别哪些 mention 需要放在同一个 cluster 中</strong>：同样需要一个二分类器，输入为两个 mention，输出判断是否属于同一个 cluster。若有 K 个 mention，需要运行 <code>K(K-1)/2</code> 次。</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-Coreference-Resolution/1655291785154.png" alt="1655291785154"></p>
<p><strong>或者可以</strong>直接输入两个 span 到二分类器中，判断这两个 span 是否代指同一个实体。若有 N 个 token，则有 <code>K=N(N-1)/2</code> 个 span，需要运行 <code>K(K-1)/2</code> 次。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-Coreference-Resolution/1655291986984.png" alt="1655291986984"></p>
<h2 id="训练二分类器"><a href="#训练二分类器" class="headerlink" title="训练二分类器"></a>训练二分类器</h2><p>一个通常的用于 Coreference Resolution 二分类器如下：</p>
<ul>
<li><p>将句子中的所有 token 输入预训练模型中，得到 embedding。</p>
</li>
<li><p>将 embedding span 输入 Span Feature Extraction，得到两个向量（每一个 Span Feature Extraction 将 embedding 汇聚成一个 embedding）。</p>
</li>
<li><p>判断两个向量是否是 mention、是否属于同一个 cluster，最终输出一个分数。</p>
</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-Coreference-Resolution/1655292350102.png" alt="1655292350102"></p>
<p>对于 <strong>Span Feature Extraction</strong>，结构如下。将 embedding span 进行 <strong>Attention</strong>，得到一个 Attention 向量，再把 span <strong>中起始 embedding</strong> 和<strong>最后一个 embedding</strong> 与 <strong>Attention 向量</strong>相加，得到 Span Feature Extraction 的输出向量。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-Coreference-Resolution/1655294345873.png" alt="1655294345873"></p>
<hr>
<p>上述是有监督模型，那么是否可以训练一个<strong>无监督</strong>模型呢？</p>
<p>答案是可以的，把 <strong>mention Mask 起来</strong>，这样模型的输出就是相关的代指实体。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-Coreference-Resolution/1655295040850.png" alt="1655295040850"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://dawnzzz.github.io/2022/06/15/GO%E8%AF%AD%E8%A8%80%E6%9D%82%E8%B0%88-12-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%92%8C%E7%BC%96%E8%AF%91%E5%99%A8%E4%BC%98%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DawnZH">
      <meta itemprop="description" content="个人博客站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dawn's Blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/06/15/GO%E8%AF%AD%E8%A8%80%E6%9D%82%E8%B0%88-12-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%92%8C%E7%BC%96%E8%AF%91%E5%99%A8%E4%BC%98%E5%8C%96/" class="post-title-link" itemprop="url">GO语言杂谈 (12) 内存管理和编译器优化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-15 11:16:34" itemprop="dateCreated datePublished" datetime="2022-06-15T11:16:34+08:00">2022-06-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-15 10:35:06" itemprop="dateModified" datetime="2023-12-15T10:35:06+08:00">2023-12-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Go%E8%AF%AD%E8%A8%80%E6%9D%82%E8%B0%88/" itemprop="url" rel="index"><span itemprop="name">Go语言杂谈</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h1><p>Go 中，内存分配主要有两个思想：</p>
<ul>
<li><strong>分块</strong></li>
<li><strong>缓存</strong></li>
</ul>
<h2 id="分块"><a href="#分块" class="headerlink" title="分块"></a>分块</h2><p>分块的思路为：</p>
<ul>
<li>调用系统调用 <code>mmap()</code> 向 OS 申请一大块内存，例如 4MB。</li>
<li>将内存划分为大块，例如 8KB，称为 <strong>mspan</strong>。<ul>
<li><strong>noscan mspan</strong>：分配不包含指针的对象，GC 不需要扫描。</li>
<li><strong>scan mspan</strong>：分配包含指针的对象，GC 需要扫描。</li>
</ul>
</li>
<li>再将 mspan 划分为特定大小的<strong>小块</strong>，用于<strong>对象分配</strong>。</li>
</ul>
<h2 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h2><p>缓存的基本思路是：</p>
<ul>
<li>每一个 P 包含一个 <strong>mcache</strong> 用于快速分配，mcache 管理<strong>一组 mspan</strong>。</li>
<li>当 mcache 中的 mspan 分配完毕，向 <strong>mcentral</strong> 申请带有未分配块的 mspan。</li>
<li>当 mspan 中没有分配的对象，mspan 会被<strong>缓存</strong>在 mcentral 中，而不是立刻释放归还给 OS。</li>
</ul>
<p><img src="/../images/GO%E8%AF%AD%E8%A8%80%E6%9D%82%E8%B0%88-12-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%92%8C%E7%BC%96%E8%AF%91%E5%99%A8%E4%BC%98%E5%8C%96/1655263401798.png" alt="1655263401798"></p>
<h2 id="优化-Balanced-GC"><a href="#优化-Balanced-GC" class="headerlink" title="优化 - Balanced GC"></a>优化 - Balanced GC</h2><p>字节跳动有自己的 Go 语言内存管理优化方案，即 <strong>Balanced GC</strong>，其思路如下：</p>
<p>每个 G 都绑定一大块内存（1 KB），称为 <strong>Goroutine Allocation Buffer（GAB）</strong>。</p>
<ul>
<li>GAB 用于 <strong>noscan</strong> 类型的<strong>小对象（小于 128B）</strong>的分配。</li>
<li>GAB 使用三个指针进行维护：<strong>base、end、top</strong>。使用<strong>指针碰撞</strong>风格进行对象分配。</li>
</ul>
<p><img src="/../images/GO%E8%AF%AD%E8%A8%80%E6%9D%82%E8%B0%88-12-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%92%8C%E7%BC%96%E8%AF%91%E5%99%A8%E4%BC%98%E5%8C%96/1655263925528.png" alt="1655263925528"></p>
<ul>
<li>GAB 对于 Go 内存管理来说就是一个<strong>大对象</strong>。</li>
</ul>
<hr>
<p>GAB 有一个<strong>问题</strong>：会导致<strong>内存被延迟释放</strong>，GAB 中即使只有一个很小的对象存活，Go 内存管理也不会回收其余空闲空间。</p>
<p><strong>解决方法</strong>：</p>
<p>当 GAB 中存活对象大小<strong>少于一定阈值</strong>时，<strong>将 GAB 中存活的对象复制到另外分配的 GAB（Survivor GAB）中</strong>，原先的 GAB 可以释放。</p>
<p><img src="/../images/GO%E8%AF%AD%E8%A8%80%E6%9D%82%E8%B0%88-12-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%92%8C%E7%BC%96%E8%AF%91%E5%99%A8%E4%BC%98%E5%8C%96/1655264117801.png" alt="1655264117801"></p>
<h1 id="编译器优化"><a href="#编译器优化" class="headerlink" title="编译器优化"></a>编译器优化</h1><h2 id="函数内联"><a href="#函数内联" class="headerlink" title="函数内联"></a>函数内联</h2><p><strong>函数内联</strong>是指，将被<strong>调用函数的函数体</strong>的<strong>副本</strong>，<strong>替换</strong>到<strong>调用位置</strong>上，同时重写代码以反映参数的绑定。</p>
<p><strong>优点</strong>：</p>
<ul>
<li>消除函数调用的开销，如传递参数、保存寄存器等。</li>
<li>扩展了函数边界，更多对象不逃逸分析。</li>
</ul>
<p><strong>缺点</strong>：</p>
<ul>
<li>函数体变大。</li>
<li>编译生成的可执行文件变大。</li>
</ul>
<h2 id="逃逸分析"><a href="#逃逸分析" class="headerlink" title="逃逸分析"></a>逃逸分析</h2><p>逃逸分析<strong>步骤</strong>：</p>
<ul>
<li>从对象分配处出发，观察对象的数据流。</li>
<li>若发现<strong>指针 p</strong> 在当前作用域 s：<ul>
<li>作为参数传递给<strong>其他函数</strong></li>
<li>传递给<strong>全局变量</strong></li>
<li>传递给<strong>其他 goroutine</strong></li>
<li>传递给<strong>已逃逸的指针指向的对象</strong></li>
</ul>
</li>
<li>则指针 p 指向的对象逃逸出 s，反正没有逃逸。</li>
</ul>
<p>对于<strong>未逃逸</strong>的对象，在<strong>栈</strong>上分配；<strong>逃逸</strong>对象，在<strong>堆</strong>上分配。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://dawnzzz.github.io/2022/06/14/GO%E8%AF%AD%E8%A8%80%E6%9D%82%E8%B0%88-11-%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DawnZH">
      <meta itemprop="description" content="个人博客站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dawn's Blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/06/14/GO%E8%AF%AD%E8%A8%80%E6%9D%82%E8%B0%88-11-%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/" class="post-title-link" itemprop="url">GO语言杂谈 (11) 依赖管理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-06-14 23:15:29" itemprop="dateCreated datePublished" datetime="2022-06-14T23:15:29+08:00">2022-06-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-15 10:35:06" itemprop="dateModified" datetime="2023-12-15T10:35:06+08:00">2023-12-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Go%E8%AF%AD%E8%A8%80%E6%9D%82%E8%B0%88/" itemprop="url" rel="index"><span itemprop="name">Go语言杂谈</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Go-依赖管理演进"><a href="#Go-依赖管理演进" class="headerlink" title="Go 依赖管理演进"></a>Go 依赖管理演进</h1><p>Go 语言中，依赖管理的演进分为<strong>三个阶段</strong>，依次是：</p>
<ul>
<li><strong>GOPATH</strong></li>
<li><strong>Go Vendor</strong></li>
<li><strong>Go Module</strong></li>
</ul>
<h2 id="GOPATH"><a href="#GOPATH" class="headerlink" title="GOPATH"></a>GOPATH</h2><p>配置环境变量 <code>$GOPATH</code>，GOPATH 下有以下三个文件夹：</p>
<ul>
<li>bin：项目编译的二进制文件</li>
<li>pkg：项目编译的中间产物，用于加速编译</li>
<li>src：项目源码</li>
</ul>
<p><strong>项目的代码直接依赖于 src 下的代码</strong>，可以通过 <code>go get</code> 命令将依赖包下载到 src 下。</p>
<hr>
<p>GOPATH 的<strong>缺点</strong>在于：无法实现对 package 的<strong>多版本控制</strong>。</p>
<p>若 A 和 B 依赖于某一 package 的不同版本，这样的情况 GOPATH 无法解决。</p>
<h2 id="Go-Vendor"><a href="#Go-Vendor" class="headerlink" title="Go Vendor"></a>Go Vendor</h2><p>项目目录下<strong>增加 vendor 文件夹</strong>，所有依赖包的<strong>副本</strong>存放在项目下的 vendor 文件夹中。</p>
<p>若 vendor 中没有依赖包，则会在 GOPATH 下去寻找。</p>
<hr>
<p>Go Vendor 的<strong>缺点</strong>在于：无法控制依赖的版本、更新项目可能出现依赖冲突。</p>
<p>若一个项目依赖于 package B 和 packag C，而 package B 依赖于 package D-V1 版本；package C 依赖于 package D-V2 版本。这样的场景下，Go Vendor 无法很好的解决。</p>
<p><img src="/../images/GO%E8%AF%AD%E8%A8%80%E6%9D%82%E8%B0%88-11-%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/1655220603232.png" alt="1655220603232"></p>
<h2 id="Go-Module"><a href="#Go-Module" class="headerlink" title="Go Module"></a>Go Module</h2><p>Go Module 通过 <strong>go.mod 文件</strong>管理依赖包版本。</p>
<p>通过 go get / go mod 工具，管理依赖包。</p>
<h1 id="Go-Module-详解"><a href="#Go-Module-详解" class="headerlink" title="Go Module 详解"></a>Go Module 详解</h1><h2 id="依赖管理三要素"><a href="#依赖管理三要素" class="headerlink" title="依赖管理三要素"></a>依赖管理三要素</h2><p>Go Module 中，依赖管理需要三要素：</p>
<ul>
<li><strong>go.mod</strong>：配置文件，描述依赖。</li>
<li><strong>Proxy</strong>：中心仓库管理依赖库。</li>
<li><strong>go get/mod</strong>：本地工具。</li>
</ul>
<h3 id="go-mod"><a href="#go-mod" class="headerlink" title="go.mod"></a>go.mod</h3><p>go.mod 文件主要由三部分构成：</p>
<ul>
<li>依赖管理基本单元：标识了这个模块可以在哪里找到（被其他人引用）。</li>
<li>原生库：Go 的版本号。</li>
<li>单元依赖：描述依赖关系，主要两部分组成。<ul>
<li>包名（Module Path）</li>
<li>版本号</li>
</ul>
</li>
</ul>
<p><img src="/../images/GO%E8%AF%AD%E8%A8%80%E6%9D%82%E8%B0%88-11-%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/1655220918315.png" alt="1655220918315"></p>
<p>其中，可以看到单元依赖的一些配置：</p>
<ul>
<li>version：<ul>
<li><strong>语义化版本</strong>：<code>$&#123;MAJOR&#125;.$&#123;MINOR&#125;.$&#123;PATCH&#125;</code>，<strong>MAJOR</strong> 是一个大版本，不同 MAJOR 可以<strong>不兼容</strong>。<strong>MINOR</strong> 做出了一些新增函数，同一个 MAJOR 下需要<strong>相互兼容</strong>。<strong>PATCH</strong> 做了一些 bug 修复。</li>
<li><strong>基于 commit 伪版本</strong>：<code>vx.0.0-yyyymmddhhmmss-abcdefgh1234</code>。</li>
</ul>
</li>
<li>indirect：对于没有直接依赖的 package，就用 indirect 标识出来。</li>
<li>incompatible：如果 MAJOR 版本大于 1 时，其<strong>版本号还需要体现在 Module 名字</strong>中（如 <code>xxx/xx/v2</code>）。但是如果 Module 名字未遵循这条规则，则会打上 incompatible 标记。</li>
</ul>
<hr>
<p>Go 在选择版本时，会选择<strong>最低的兼容版本</strong>：</p>
<p>如下图中，最终编译时所使用的 C 项目版本为 1.4 版本。</p>
<p><img src="/../images/GO%E8%AF%AD%E8%A8%80%E6%9D%82%E8%B0%88-11-%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/1655221776213.png" alt="1655221776213"></p>
<h3 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h3><p><strong>Go Proxy 是一个服务站点</strong>，他会缓存源站中的软件内容，缓存的软件版本不会改变，源站软件删除后依然可用。</p>
<p><img src="/../images/GO%E8%AF%AD%E8%A8%80%E6%9D%82%E8%B0%88-11-%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/1655221901310.png" alt="1655221901310"></p>
<p><code>GOPROXY=&quot;https://proxy1.cn,https://proxy2.cn,direct&quot;</code>，含义是<strong>依次</strong>从 proxy1、proxy2、源站中获取 package。</p>
<h3 id="go-get-mod"><a href="#go-get-mod" class="headerlink" title="go get/mod"></a>go get/mod</h3><ul>
<li><p><strong>go get</strong>：<code>go get example.org/pkg</code>，参数如下：</p>
<ul>
<li><code>@update</code>：默认，获取最新版本。</li>
<li><code>@none</code>：删除依赖。</li>
<li><code>@v1.1.1</code>：语义化版本。</li>
<li><code>@45dfsf</code>：特定的 commit。</li>
<li><code>@master</code>：分支的最新 commit。</li>
</ul>
</li>
<li><p><strong>go mod</strong>：参数如下：</p>
<ul>
<li><code>init</code>：初始化，创建 go.mod 文件。</li>
<li><code>download</code>：下载模块到本地。</li>
<li><code>tidy</code>：增加需要的依赖，删除不需要的依赖。</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://dawnzzz.github.io/2022/05/31/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-BERT%E5%8F%8A%E5%85%B6%E5%AE%B6%E6%97%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DawnZH">
      <meta itemprop="description" content="个人博客站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dawn's Blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/31/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-BERT%E5%8F%8A%E5%85%B6%E5%AE%B6%E6%97%8F/" class="post-title-link" itemprop="url">NLP学习笔记 (3) BERT及其家族</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-05-31 16:51:03" itemprop="dateCreated datePublished" datetime="2022-05-31T16:51:03+08:00">2022-05-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-15 10:35:06" itemprop="dateModified" datetime="2023-12-15T10:35:06+08:00">2023-12-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">NLP学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="BERT-介绍"><a href="#BERT-介绍" class="headerlink" title="BERT 介绍"></a>BERT 介绍</h1><p>我们将一些不带标注的文章，先<strong>预训练</strong>，得到一个 Model，这个 Model 可以看作是能够理解文字内容。</p>
<p>接着用一些带标注的特殊语料，进行 <strong>Fine-tune（微调）</strong>，训练出可以完成特殊任务的 Model。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-BERT%E5%8F%8A%E5%85%B6%E5%AE%B6%E6%97%8F/1654002682379.png" alt="1654002682379"></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2022/05/31/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-BERT%E5%8F%8A%E5%85%B6%E5%AE%B6%E6%97%8F/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://dawnzzz.github.io/2022/05/30/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2-NLP%E4%BB%BB%E5%8A%A1%E6%A6%82%E8%BF%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="DawnZH">
      <meta itemprop="description" content="个人博客站点">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dawn's Blogs">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/30/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2-NLP%E4%BB%BB%E5%8A%A1%E6%A6%82%E8%BF%B0/" class="post-title-link" itemprop="url">NLP学习笔记 (2) NLP任务概述</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-05-30 20:34:20" itemprop="dateCreated datePublished" datetime="2022-05-30T20:34:20+08:00">2022-05-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-12-15 10:35:06" itemprop="dateModified" datetime="2023-12-15T10:35:06+08:00">2023-12-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">NLP学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="NLP-任务分类"><a href="#NLP-任务分类" class="headerlink" title="NLP 任务分类"></a>NLP 任务分类</h1><p>NLP 任务总的来说分为两类：</p>
<ul>
<li>输入文字，输出类别。</li>
<li>输入文字，输出另一段文字。</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2-NLP%E4%BB%BB%E5%8A%A1%E6%A6%82%E8%BF%B0/1653914138938.png" alt="1653914138938"></p>
<p>那么进一步的，可以根据输入和输出的不同，进行划分。</p>
<h2 id="输出的不同"><a href="#输出的不同" class="headerlink" title="输出的不同"></a>输出的不同</h2><ul>
<li>输出类别：<ul>
<li>为一段话，只输出一个类别。</li>
<li>为每一个 token 都输出一个类别。</li>
</ul>
</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2-NLP%E4%BB%BB%E5%8A%A1%E6%A6%82%E8%BF%B0/1653914425983.png" alt="1653914425983"></p>
<ul>
<li>输出另一段文字：<ul>
<li>使用 seq2seq 模型。</li>
</ul>
</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2-NLP%E4%BB%BB%E5%8A%A1%E6%A6%82%E8%BF%B0/1653914435623.png" alt="1653914435623"></p>
<h2 id="输入的不同"><a href="#输入的不同" class="headerlink" title="输入的不同"></a>输入的不同</h2><ul>
<li>一段文字。</li>
<li>多段文字：<ul>
<li>将多段文字拼接起来，中间用 <code>&lt;SEP&gt;</code> 连接。</li>
<li>分别放入 Model 中，再对输出进行整合。</li>
</ul>
</li>
</ul>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2-NLP%E4%BB%BB%E5%8A%A1%E6%A6%82%E8%BF%B0/1653914566952.png" alt="1653914566952"></p>
<h1 id="NLP-任务"><a href="#NLP-任务" class="headerlink" title="NLP 任务"></a>NLP 任务</h1><p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2-NLP%E4%BB%BB%E5%8A%A1%E6%A6%82%E8%BF%B0/1653916977054.png" alt="1653916977054"></p>
<h1 id="知识图谱"><a href="#知识图谱" class="headerlink" title="知识图谱"></a>知识图谱</h1><p>知识图谱中，最重要的就是<strong>实体（Entity）</strong>和<strong>关系（Relation）</strong>。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2-NLP%E4%BB%BB%E5%8A%A1%E6%A6%82%E8%BF%B0/1653917666204.png" alt="1653917666204"></p>
<h2 id="提取实体-NER"><a href="#提取实体-NER" class="headerlink" title="提取实体 - NER"></a>提取实体 - NER</h2><p><strong>NER，Name Entity Recognition</strong>，命名实体识别。用于提取一段文字中给定的实体信息。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2-NLP%E4%BB%BB%E5%8A%A1%E6%A6%82%E8%BF%B0/1653917699539.png" alt="1653917699539"></p>
<h2 id="提取关系"><a href="#提取关系" class="headerlink" title="提取关系"></a>提取关系</h2><p>提取关系，可以看成是一种<strong>分类</strong>问题。</p>
<p><img src="/../images/NLP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2-NLP%E4%BB%BB%E5%8A%A1%E6%A6%82%E8%BF%B0/1653917789907.png" alt="1653917789907"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/24/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><span class="page-number current">25</span><a class="page-number" href="/page/26/">26</a><span class="space">&hellip;</span><a class="page-number" href="/page/39/">39</a><a class="extend next" rel="next" href="/page/26/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">DawnZH</p>
  <div class="site-description" itemprop="description">个人博客站点</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">388</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">50</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">48</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">DawnZH</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
